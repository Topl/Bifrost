"use strict";(self.webpackChunkbifrost_documentation=self.webpackChunkbifrost_documentation||[]).push([[574],{3956:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>i,toc:()=>c});var t=s(5893),l=s(1151);const r={id:"install-k8s",title:"Run with Helm/Kubernetes",tags:["Install","Getting started","sdkman","scala","jar"]},a=void 0,i={id:"reference/Installing Your Node/install-k8s",title:"Run with Helm/Kubernetes",description:"Quickstart",source:"@site/docs/reference/Installing Your Node/helm-kubernetes.md",sourceDirName:"reference/Installing Your Node",slug:"/reference/Installing Your Node/install-k8s",permalink:"/Bifrost/docs/current/reference/Installing Your Node/install-k8s",draft:!1,unlisted:!1,tags:[{label:"Install",permalink:"/Bifrost/docs/current/tags/install"},{label:"Getting started",permalink:"/Bifrost/docs/current/tags/getting-started"},{label:"sdkman",permalink:"/Bifrost/docs/current/tags/sdkman"},{label:"scala",permalink:"/Bifrost/docs/current/tags/scala"},{label:"jar",permalink:"/Bifrost/docs/current/tags/jar"}],version:"current",frontMatter:{id:"install-k8s",title:"Run with Helm/Kubernetes",tags:["Install","Getting started","sdkman","scala","jar"]},sidebar:"referenceSidebar",previous:{title:"Run with Docker",permalink:"/Bifrost/docs/current/reference/Installing Your Node/install-docker"},next:{title:"Connect To Testnet",permalink:"/Bifrost/docs/current/reference/Networks/connect-to-testnet"}},o={},c=[{value:"Quickstart",id:"quickstart",level:2},{value:"Tools needed:",id:"tools-needed",level:3},{value:"Install K8s cluster",id:"install-k8s-cluster",level:2},{value:"Ubuntu",id:"ubuntu",level:3},{value:"Enable add ons",id:"enable-add-ons",level:4},{value:"Windows",id:"windows",level:3}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"quickstart",children:"Quickstart"}),"\n",(0,t.jsx)(n.h3,{id:"tools-needed",children:"Tools needed:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Docker"}),"\n",(0,t.jsx)(n.li,{children:"Kubernetes"}),"\n",(0,t.jsx)(n.li,{children:"Helm"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:"values.yaml",children:"args: ['--dataDir', '/mnt/bifrost/data', '--stakingDir', '/mnt/bifrost/staking']\n\nvolume:\n  mountDirectory: /mnt/bifrost\n\nhelm repo add topl https://topl.github.io/helm-charts\nhelm repo update\nhelm upgrade --install bifrost topl/bifrost -n bifrost --create-namespace -f ./values.yaml\n"})}),"\n",(0,t.jsx)(n.h2,{id:"install-k8s-cluster",children:"Install K8s cluster"}),"\n",(0,t.jsx)(n.h3,{id:"ubuntu",children:"Ubuntu"}),"\n",(0,t.jsx)(n.p,{children:"In this example, we will use microk8s. There are many others you can use, including Docker Desktop + K8s, Minikube, k3s, Kind, etc."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://microk8s.io/docs/getting-started",children:"https://microk8s.io/docs/getting-started"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"sudo snap install microk8s --classic\n# Add user to group\nsudo usermod -a -G microk8s $USER\nsudo chown -f -R $USER ~/.kube\n"})}),"\n",(0,t.jsx)(n.h4,{id:"enable-add-ons",children:"Enable add ons"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"microk8s enable dns hostpath-storage\n"})}),"\n",(0,t.jsx)(n.h3,{id:"windows",children:"Windows"}),"\n",(0,t.jsxs)(n.p,{children:["Follow Docker Desktop installation instructions: \u200b ",(0,t.jsx)(n.a,{href:"https://www.docker.com/products/docker-desktop/",children:"https://www.docker.com/products/docker-desktop/"}),"\nI recommend using the WSL2 backend. Instructions are here: \u200b",(0,t.jsx)(n.a,{href:"https://docs.docker.com/desktop/windows/wsl/",children:"https://docs.docker.com/desktop/windows/wsl/"})]}),"\n",(0,t.jsx)(n.p,{children:"Once Docker Desktop is installed, k8s is as easy as clicking a button"}),"\n",(0,t.jsx)(n.p,{children:"Add an Alias"}),"\n",(0,t.jsx)(n.p,{children:"You may also want to create an alias so you don\u2019t have to type microk8s kubectl every time. A common way would be do"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"vim ~/.bash_aliases\n"})}),"\n",(0,t.jsx)(n.p,{children:"Add this line"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'alias k="microk8s kubectl"\nalias helm="microk8s helm"\n'})}),"\n",(0,t.jsx)(n.p,{children:"Reload the shell, and then you can run commands like"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"k get pods\n"})}),"\n",(0,t.jsx)(n.p,{children:"The rest of the guide assumes an alias. If you didn\u2019t add one, use the kubectl , microk8s kubectl, minikube kubectl, etc."}),"\n",(0,t.jsx)(n.p,{children:"Install Helm Chart"}),"\n",(0,t.jsx)(n.p,{children:"Add the Topl Helm repository"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"helm repo add topl https://topl.github.io/helm-charts\nhelm repo update\n"})}),"\n",(0,t.jsx)(n.p,{children:"Install the Bifrost helm chart"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"helm upgrade --install bifrost topl/bifrost -n bifrost --create-namespace\n"})}),"\n",(0,t.jsx)(n.p,{children:"You can pass values to the chart either by passing a values.yaml file, or individual values via the --set flag."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"helm upgrade --install bifrost topl/bifrost -n bifrost --create-namespace -f ./path/to/values.yaml\nhelm upgrade --install bifrost topl/bifrost --set volume.mountDirectory='/mnt/bifrost' -n bifrost --create-namespace\n"})}),"\n",(0,t.jsx)(n.p,{children:"Finally, check the pod to make sure it is running."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"k get pods -n bifrost\n\n# To get more detailed info if the pod did not start, run\nk describe pods -n bifrost\n"})}),"\n",(0,t.jsx)(n.p,{children:"You can view the logs by running:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"k logs statefulset/bifrost -n bifrost\n\n# Or individual pods:\nk logs bifrost-0 -n bifrost\n"})})]})}function u(e={}){const{wrapper:n}={...(0,l.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},1151:(e,n,s)=>{s.d(n,{Z:()=>i,a:()=>a});var t=s(7294);const l={},r=t.createContext(l);function a(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:a(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);